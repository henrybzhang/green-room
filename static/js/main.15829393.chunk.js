(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{18:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var r=c(0),a=c.n(r),n=c(9),i=c.n(n),s=(c(18),c(3)),b=c(2),o=c(1),l=Object(r.createContext)();function u(e){var t=e.children,c=Object(r.useState)({}),a=Object(s.a)(c,2),n=a[0],i=a[1],u=Object(r.useState)({}),j=Object(s.a)(u,2),d=j[0],O=j[1],h=function(e){var t=Object(b.a)({},n);Object.entries(e).forEach((function(e){var c=Object(s.a)(e,2),r=c[0],a=c[1];r in t?t[r]+=a:t[r]=a})),i(t)},f=Object(r.useMemo)((function(){return{playerItems:n,playerStructures:d,setPlayerStructures:O,updateItems:h}}),[n,d]);return Object(o.jsx)(l.Provider,{value:f,children:t})}c(20);var j=function(){var e=Object(r.useContext)(l).playerItems;return Object(o.jsxs)("fieldset",{className:"inventory-container",children:[Object(o.jsx)("legend",{children:"Collection"}),Object.entries(e).map((function(e){var t=Object(s.a)(e,2),c=t[0],r=t[1];return Object(o.jsxs)("div",{className:"inventory-item",children:[Object(o.jsxs)("div",{children:[c,":\xa0"]}),Object(o.jsx)("div",{className:"item-count",children:r})]},c)}))]})},d=c(4),O=Object(r.createContext)(),h={pickUpTrash:"Pick up trash"},f={recycler:{metal:-1},airFilter:{wood:-1},net:{plastic:-1},bridge:{wood:-1,metal:-1}},v=["trash","wood","metal","plastic"],p=["trash","plastic"],m=["wood","metal","plastic"],g=new Set(["pickUpTrash","buildRecycler","useRecycler","buildAirFilter","buildNet","useNet","buildBridge"]);function k(e){var t=e.children,c=Object(r.useContext)(l),a=c.playerItems,n=c.updateItems,i=c.playerStructures,u=c.setPlayerStructures,j=Object(r.useState)(null),k=Object(s.a)(j,2),y=k[0],x=k[1],w=Object(r.useState)(h),N=Object(s.a)(w,2),C=N[0],S=N[1],E=Object(r.useState)({}),T=Object(s.a)(E,2),A=T[0],F=T[1],U=Object(r.useState)(1),I=Object(s.a)(U,2),M=I[0],R=I[1],P=function(e){var t=!1;return Object.entries(f[e]).forEach((function(e){var c=Object(s.a)(e,2),r=c[0],n=c[1];a[r]+n>=0&&(t=!0)})),t};Object(r.useEffect)((function(){if(y){try{if(!g.has(y))throw Error("Unknown action: ".concat(y));switch(y){case"pickUpTrash":var e=v[Math.floor(Math.random()*v.length)];n(Object(d.a)({},e,1));break;case"buildRecycler":u(Object(b.a)(Object(b.a)({},i),{},{recycler:!0})),n(f.recycler);break;case"useRecycler":var t,c=m[Math.floor(Math.random()*m.length)];n((t={},Object(d.a)(t,c,1),Object(d.a)(t,"trash",-1),t));break;case"buildAirFilter":u(Object(b.a)(Object(b.a)({},i),{},{airFilter:!0})),n(f.airFilter);break;case"buildNet":u(Object(b.a)(Object(b.a)({},i),{},{net:!0})),n(f.net);break;case"useNet":var r=p[Math.floor(Math.random()*p.length)];n(Object(d.a)({},r,1));break;case"buildBridge":u(Object(b.a)(Object(b.a)({},i),{},{bridge:!0})),n(f.bridge);break;default:throw Error("Undeveloped action: ".concat(y))}F((a=y)in A?Object(b.a)(Object(b.a)({},A),{},Object(d.a)({},a,A[a]+1)):Object(b.a)(Object(b.a)({},A),{},Object(d.a)({},a,1)))}catch(s){console.log(s)}var a;x(null)}}),[y]),Object(r.useEffect)((function(){S(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({pickUpTrash:"Pick up trash"},P("recycler")&&!i.recycler&&{buildRecycler:"Fix recycler"}),a.trash&&i.recycler&&{useRecycler:"Recycle trash"}),P("airFilter")&&!i.airFilter&&i.recycler&&{buildAirFilter:"Construct air filter"}),P("net")&&3===M&&{buildNet:"Construct river net"}),i.net&&{useNet:"Filter river trash"}),P("bridge")&&4===M&&{buildBridge:"Construct a bridge"}))}),[a,M,i]),Object(r.useEffect)((function(){var e=M;if(1===M&&A.pickUpTrash>=10)e=2;else if(2===M&&A.pickUpTrash>=10&&i.airFilter)e=3;else if(3===M&&A.useNet>=5)e=4;else if(4===M&&i.bridge)e=5;else{if(!(5===M&&A.pickUpTrash>=10))return;e=6}F({}),R(e)}),[i,M,A]);var B=Object(r.useMemo)((function(){return{currentAction:y,environmentLevel:M,availableActions:C,setCurrentAction:x}}),[y,M,C]);return Object(o.jsx)(O.Provider,{value:B,children:t})}c(21);var y=function(e){var t=e.actionName,c=e.actionText,a=Object(r.useContext)(O).setCurrentAction;return Object(o.jsx)("button",{type:"button",className:"buttons shrink-on-hover",onClick:function(){return a(t)},children:c})};c(22);var x=function(){var e=Object(r.useContext)(O).availableActions;return Object(o.jsx)("div",{className:"buttons-group",children:Object.entries(e).map((function(e){var t=Object(s.a)(e,2),c=t[0],r=t[1];return Object(o.jsx)(y,{actionName:c,actionText:r},c)}))})},w=c(5),N=(c(23),["The surrounding area is piled high with trash and is extremely polluted. Smog covers the land, making the visibility almost nil."]);var C=function(){var e=Object(r.useContext)(O).currentAction,t=Object(r.useState)(N),c=Object(s.a)(t,2),a=c[0],n=c[1];return Object(r.useEffect)((function(){if(e)try{if(!g.has(e))throw Error("Unknown action: ".concat(e));var t=a.slice(0,20);switch(e){case"pickUpTrash":n(["The surrounding area has been slightly cleared of trash"].concat(Object(w.a)(t)));break;case"buildRecycler":n(["The recycler is now operational"].concat(Object(w.a)(t)));break;case"useRecycler":n(["Some usable items have been recycled from trash"].concat(Object(w.a)(t)));break;case"buildAirFilter":n(["An air filter has been constructed"].concat(Object(w.a)(t)));break;case"buildNet":n(["A net has been built"].concat(Object(w.a)(t)));break;case"useNet":n(["Some litter has been filtered from the river"].concat(Object(w.a)(t)));break;case"buildBridge":n(["The river can now be crossed"].concat(Object(w.a)(t)));break;default:throw Error("Undeveloped action: ".concat(e))}}catch(c){console.log(c)}}),[e]),Object(o.jsx)("div",{className:"log",children:a.map((function(e,t){return Object(o.jsx)("div",{style:{opacity:(20-t)/20},children:e},t)}))})},S=c.p+"static/media/1.e6b114f3.jpeg",E=c.p+"static/media/2.e1e3d8fd.jpeg",T=c.p+"static/media/3.9f993332.jpeg",A=c.p+"static/media/4.6d634823.jpeg",F=c.p+"static/media/5.8148bb66.gif",U=c.p+"static/media/6.2050b749.gif",I=[S,E,T,A,F,U],M=Object(r.createContext)();function R(e){var t=e.children,c=Object(r.useContext)(O).environmentLevel,a=Object(r.useState)(S),n=Object(s.a)(a,2),i=n[0],b=n[1];Object(r.useEffect)((function(){I.forEach((function(e){(new Image).src=e}))}),[]),Object(r.useEffect)((function(){switch(c){case 1:b(S);break;case 2:b(E);break;case 3:b(T);break;case 4:b(A);break;case 5:b(F);break;case 6:b(U)}}),[c]);var l=Object(r.useMemo)((function(){return{backgroundImage:i}}),[i]);return Object(o.jsx)(M.Provider,{value:l,children:t})}c(24);var P=function(){var e=Object(r.useContext)(M).backgroundImage;return Object(o.jsx)("div",{className:"app",style:{backgroundImage:"url(".concat(e,")")},children:Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)(C,{}),Object(o.jsx)(x,{}),Object(o.jsx)(j,{})]})})};i.a.createRoot(document.getElementById("root")).render(Object(o.jsx)(a.a.StrictMode,{children:Object(o.jsx)(u,{children:Object(o.jsx)(k,{children:Object(o.jsx)(R,{children:Object(o.jsx)(P,{})})})})}))}},[[25,1,2]]]);
//# sourceMappingURL=main.15829393.chunk.js.map