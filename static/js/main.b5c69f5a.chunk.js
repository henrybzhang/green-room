(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{18:function(e,t,c){},20:function(e,t,c){},21:function(e,t,c){},22:function(e,t,c){},23:function(e,t,c){},24:function(e,t,c){},25:function(e,t,c){"use strict";c.r(t);var a=c(0),r=c.n(a),n=c(9),i=c.n(n),s=(c(18),c(3)),b=c(4),o=c(2),l=c(1),u=Object(a.createContext)();function j(e){var t=e.children,c=Object(a.useState)({}),r=Object(s.a)(c,2),n=r[0],i=r[1],j=Object(a.useState)({}),d=Object(s.a)(j,2),O=d[0],h=d[1];return Object(l.jsx)(u.Provider,{value:{playerItems:n,playerStructures:O,setPlayerStructures:h,addItem:function(e,t){i(e in n?Object(o.a)(Object(o.a)({},n),{},Object(b.a)({},e,n[e]+t)):Object(o.a)(Object(o.a)({},n),{},Object(b.a)({},e,t)))}},children:t})}c(20);var d=function(){var e=Object(a.useContext)(u).playerItems;return Object(l.jsxs)("fieldset",{className:"invent",children:[Object(l.jsx)("legend",{children:"Collection"}),Object.entries(e).map((function(e){var t=Object(s.a)(e,2),c=t[0],a=t[1];return Object(l.jsxs)("div",{className:"invent-items",children:[Object(l.jsxs)("div",{children:[c,":\xa0"]}),Object(l.jsx)("div",{className:"invent-item-two",children:a})]})}))]})},O=Object(a.createContext)(),h={pickUpTrash:"Pick up trash"},f=["trash","wood","metal","plastic"],p=["trash","plastic"],v=new Set(["pickUpTrash","buildRecycler","useRecycler","buildAirFilter","buildNet","useNet","buildBridge"]);function m(e){var t=e.children,c=Object(a.useContext)(u),r=c.addItem,n=c.playerItems,i=c.playerStructures,j=c.setPlayerStructures,d=Object(a.useState)(null),m=Object(s.a)(d,2),k=m[0],x=m[1],g=Object(a.useState)(h),y=Object(s.a)(g,2),N=y[0],w=y[1],C=Object(a.useState)({}),S=Object(s.a)(C,2),A=S[0],T=S[1],U=Object(a.useState)(1),E=Object(s.a)(U,2),F=E[0],R=E[1];return Object(a.useEffect)((function(){if(k){try{if(!v.has(k))throw Error("Unknown action: ".concat(k));switch(k){case"pickUpTrash":var e=f[Math.floor(Math.random()*f.length)];r(e,1);break;case"buildRecycler":j(Object(o.a)(Object(o.a)({},i),{},{recycler:!0}));break;case"useRecycler":break;case"buildAirFilter":j(Object(o.a)(Object(o.a)({},i),{},{airFilter:!0}));break;case"buildNet":j(Object(o.a)(Object(o.a)({},i),{},{net:!0}));break;case"useNet":var t=p[Math.floor(Math.random()*p.length)];r(t,1);break;case"buildBridge":j(Object(o.a)(Object(o.a)({},i),{},{bridge:!0}));break;default:throw Error("Undeveloped action: ".concat(k))}T((c=k)in A?Object(o.a)(Object(o.a)({},A),{},Object(b.a)({},c,A[c]+1)):Object(o.a)(Object(o.a)({},A),{},Object(b.a)({},c,1)))}catch(a){console.log(a)}var c;x(null)}}),[k]),Object(a.useEffect)((function(){w(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({pickUpTrash:"Pick up trash"},n.metal>5&&!i.recycler&&{buildRecycler:"Fix recycler"}),n.trash&&i.recycler&&{useRecycler:"Recycle trash"}),n.plastic>5&&n.wood>5&&!i.airFilter&&i.recycler&&{buildAirFilter:"Construct air filter"}),n.plastic>5&&!i.net&&i.airFilter&&{buildNet:"Construct river net"}),i.net&&{useNet:"Filter river trash"}),n.wood>10&&n.metal>10&&4===F&&{buildBridge:"Construct a bridge"}))}),[n,F,i]),Object(a.useEffect)((function(){var e=F;if(1===F&&A.pickUpTrash>=10)e=2;else if(2===F&&A.pickUpTrash>=10&&i.airFilter)e=3;else if(3===F&&A.useNet>=5)e=4;else if(4===F&&i.bridge)e=5;else{if(!(5===F&&A.pickUpTrash>=10))return;e=6}T({}),R(e)}),[i,F,A]),Object(l.jsx)(O.Provider,{value:{currentAction:k,setCurrentAction:x,availableActions:N,environmentLevel:F},children:t})}c(21);var k=function(e){var t=e.actionName,c=e.actionText,r=Object(a.useContext)(O).setCurrentAction;return Object(l.jsx)("button",{type:"button",className:"buttons shrink-on-hover",onClick:function(){return r(t)},children:c})};c(22);var x=function(){var e=Object(a.useContext)(O).availableActions;return Object(l.jsx)("div",{className:"buttons-group",children:Object.entries(e).map((function(e){var t=Object(s.a)(e,2),c=t[0],a=t[1];return Object(l.jsx)(k,{actionName:c,actionText:a})}))})},g=c(5);c(23);var y=function(){var e=Object(a.useContext)(O).currentAction,t=Object(a.useState)([]),c=Object(s.a)(t,2),r=c[0],n=c[1];return Object(a.useEffect)((function(){if(e)try{if(!v.has(e))throw Error("Unknown action: ".concat(e));switch(e){case"pickUpTrash":n(["Some trash from the ground is picked up"].concat(Object(g.a)(r)));break;case"buildRecycler":n(["The recycler is now operational"].concat(Object(g.a)(r)));break;case"useRecycler":n(["Some trash is recycled into usable items"].concat(Object(g.a)(r)));break;case"buildAirFilterv":n(["An air filter has been constructed"].concat(Object(g.a)(r)));break;case"buildNet":n(["A net has been built"].concat(Object(g.a)(r)));break;case"useNet":n(["Some litter is filtered from the river"].concat(Object(g.a)(r)));break;case"buildBridge":n(["The river can now be crossed"].concat(Object(g.a)(r)));break;default:throw Error("Undeveloped action: ".concat(e))}}catch(t){console.log(t)}}),[e]),Object(l.jsx)("div",{className:"log",children:r.map((function(e){return Object(l.jsx)("div",{children:e})}))})},N=c.p+"static/media/1.e6b114f3.jpeg",w=c.p+"static/media/2.e1e3d8fd.jpeg",C=c.p+"static/media/3.9f993332.jpeg",S=c.p+"static/media/4.6d634823.jpeg",A=c.p+"static/media/5.8148bb66.gif",T=c.p+"static/media/6.2050b749.gif",U=Object(a.createContext)();function E(e){var t=e.children,c=Object(a.useContext)(O).environmentLevel,r=Object(a.useState)(N),n=Object(s.a)(r,2),i=n[0],b=n[1];return Object(a.useEffect)((function(){switch(c){case 1:b(N);break;case 2:b(w);break;case 3:b(C);break;case 4:b(S);break;case 5:b(A);break;case 6:b(T)}}),[c]),Object(l.jsx)(U.Provider,{value:{backgroundImage:i},children:t})}c(24);var F=function(){var e=Object(a.useContext)(U).backgroundImage;return Object(l.jsx)("div",{className:"app",style:{backgroundImage:"url(".concat(e,")")},children:Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(y,{}),Object(l.jsx)(x,{}),Object(l.jsx)(d,{})]})})};i.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(j,{children:Object(l.jsx)(m,{children:Object(l.jsx)(E,{children:Object(l.jsx)(F,{})})})})}))}},[[25,1,2]]]);
//# sourceMappingURL=main.b5c69f5a.chunk.js.map